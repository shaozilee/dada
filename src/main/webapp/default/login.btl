<!DOCTYPE html>
<html>
  <head>
    <title>Easy API Platform</title>
    <% include("_common.btl"){} %>
    <style type="text/css">
      .panel{
        display: none;
      }
      .show{
        display: block;
      }
      .row{
        height: 40px;
        line-height: 40px;
        margin-bottom: 20px;
        position: relative;
      }

      .row input{
        width: 100%;
        height: 40px;
        line-height: 40px;
        font-size: 16px;
        color: #888;
        background: #efefef;
        border-radius: 4px;
        border: none;
        overflow: hidden;
        text-indent: 60px;
      }

      .row label{
        position: absolute;
        left: 10px;
        top: 0px;
        width: 70px;
        line-height: 40px;
        height: 40px;
        font-size: 14px;
        color: #444;
      }

      .login-btn{
        float: left;
        width: 160px;
      }

      .regist-btn{
        float: left;
        background-color: #2c9d7a;
        width: 160px;
        margin-left: 20px;
      }

      .regist-btn:hover{
        background-color: #60b395;
      }


      .ok-btn{
        float: left;
        width: 160px;
        margin-left: 90px;
      }

    </style>
  </head>
  <body>
    <% include("_header.btl"){} %>
    <div style="padding-top: 60px;">
      <div style="margin:0 auto;width:340px;padding:40px;border-radius: 10px;border:1px #cccccc solid;overflow: hidden;">
        <div id="loginPanel" class="panel show">
          <div class="row">
            <input type="text" id="userName"/>
            <label>账<i class="zi"></i>号</label>
          </div>
          <div class="row">
            <input type="password" id="password"/>
            <label>密<i class="zi"></i>码</label>
          </div>
          <div class="row">
            <a id="loginBtn" class="btn login-btn" href="javascript:void(0);">登录</a>
            <a href="regist.html" class="btn regist-btn" style="float: right;">注册</a>
          </div>

          <div id="errorMsg">

          </div>

        </div>
        <div id="resultPanel" class="panel">
          <div class="row msg"></div>
          <div class="row">
            <a href="javascript:void(0);" class="btn ok-btn">确定</a>
          </div>
        </div>

      </div>





    </div>

    <% include("_commonjs.btl"){} %>

    <script type="text/javascript">

      var redirect = "${redirect}";
      if(!redirect){redirect = "${ctxPath}/index.html"};

      $("#loginBtn").click(function(){
        var param = {
          user_name:$("#userName").val(),
          password: $("#password").val()
        };

        $.post(DA.ROOT+"/doLogin.do", param, function (resp) {
          resp = JSON.parse(resp);
          if(resp.code === "0000"){
            window.location.replace(redirect);
          }else{
            $("#errorMsg").text(resp.msg);
          }
        });
      });

    </script>

  </body>
</html>
